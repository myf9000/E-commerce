<h1><%= @category.nil? ? 'Main categories' : @category.name %></h1>
<table>
<% @categories.each do |category| %>
<tr>
  <td><%= link_to category.name, category_path(category) %></td>
  <td><%= link_to 'Edit', edit_category_path(category) unless category.parent_id.nil? %></td>
  <td><%= link_to 'Destroy', category_path(category), :confirm => 'Are you sure?', :method => :delete unless category.parent_id.nil? %></td>
</tr>
<% end %>
</table>
<p>
  <%= link_to 'Back', @category.parent_id.nil? ? categories_path : category_path(@category.parent_id) unless @category.nil? %>
  <%= link_to 'New (sub-category)', new_category_path(@category) unless @category.nil? %>
</p>

 <%= link_to 'New', new_category_path%>